最適化オプションなどである程度なめらかに動くようにした
bonusにも対応させた